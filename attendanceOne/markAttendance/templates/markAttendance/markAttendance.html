{% extends 'main/base.html' %}
{% block title %}
Mark-Attendace
{% endblock %}

{% block head %}
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.25/webcam.js"></script>
{% endblock %}

{% block content %}
{{ userid }}

{% if attendeeImgSend %}
<script>
  Swal.fire({
    position: 'center',
    icon: 'success',
    title: 'Attendance Marked Succfully!',
    showConfirmButton: false,
    timer: 1500
  })
</script>
{% endif %}

<div id="camera" style="height:auto;width:auto; text-align:left;"></div>

<!--FOR THE SNAPSHOT-->
<input type="button" value="Take a Snap" id="btPic" onclick="takeSnapShot()" />
<p id="snapShot"></p>

<form method="post" action="/attendance/{{ userid }}/">
  {% csrf_token %}

  <div class="form-group input-group">
    <input type="text" id="result" class="form-control-file" name="result" value="Waiting for Image" readonly required>
  </div> <!-- form-group end.// -->
  <p id="snapShot"></p>
  <br>
  <button type="submit" class="btn btn-primary btn-block" name="markAttendance">Mark Attendance</button>

</form>
</body>

<!-- Taking Image and send data to Table -->
<script>
  // CAMERA SETTINGS.
  // Webcam.set_api_url('/user/save_image/');
  // Webcam.set_quality(90); // JPEG quality (1 - 100)
  // Webcam.set_shutter_sound(true); // play shutter click sound
  Webcam.set({
    width: 220,
    height: 190,
    image_format: 'jpeg',
    jpeg_quality: 100
  });
  Webcam.attach('#camera');

  // SHOW THE SNAPSHOT.
  takeSnapShot = function () {
    Webcam.snap(function (data_uri) {
      document.getElementById('result').value = data_uri;
      console.log(data_uri);
      document.getElementById('snapShot').innerHTML =
        '<img src="' + data_uri + '" width="70px" height="50px" />';
    });
  }




</script>

{% endblock %}